\section{Other GNU Program Crashes}

\begin{lstlisting}[label={lst:make/calloc},firstnumber=278, caption={\texttt{make} crashes when \texttt{calloc} returns an error. The offending code is in the Make 4.2 source code, in \texttt{file.c:278}.}]
	file_slot = (struct file **) files.ht_vec;
	file_end = file_slot + files.ht_size;
+	
+	if (!file_slot)
+	  return;
+	
	for ( ; file_slot < file_end; file_slot++)
	  if (! HASH_VACANT (*file_slot))
	    {
	      struct file *f = *file_slot;                                          
\end{lstlisting}

\begin{lstlisting}[label={lst:grep/malloc},firstnumber=265, caption={\texttt{grep} crashes when \texttt{malloc} returns an error. The offending code is in the Grep 2.25 source code, in \texttt{lib/exclude.c:265}.}]
	case exclude_hash:
	  sp->v.table = hash_initialize (0, NULL,
	                                 (options & FNM_CASEFOLD) ?
	                                   string_hasher_ci
	                                   : string_hasher,
	                                 (options & FNM_CASEFOLD) ?
	                                   string_compare_ci
	                                   : string_compare,
	                                 string_free);
+	  if (!sp->v.table)
+	    abort();
                                          
\end{lstlisting}